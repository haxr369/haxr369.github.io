---
title: AWS EC2 Instance Storage
date: 2023-10-19
lastmod: 2023-10-19
tags: ['AWS', 'EC2', 'EBS', 'Instance-Storage', 'DVA-C02']
draft: false
summary: 'AWS EC2의 인스턴스 스토리이에대한 이해'
---

## 목차

<TOCInline toc={props.toc} exclude="목차" toHeading={2} />

## 개요

EBS Volume은 Elastic Block Store Volume의 약자. 인스턴스가 실행 중인 동안 연결 가능한 네트워크 드라이브. EBS를 사용하면 인스턴스를 종료하더라도 데이터를 지속할 수 있다.

하나의 EBS는 하나의 EC2 인스턴스에 마운트 가능하지만, 하나의 EC2에 여러개의 EBS를 마운트 할 수 있다. 또한 AZ에 종속된다. 예를 들어 us-east-1a에 생성된 경우 us-east-1b에서는 사용할 수 없다. 다만, 스냅샷을 사용하면 다른 가용영역에서도 사용할 수 있다.

정리하면 EBS는 `네트워크로 연결되는 USB 스틱`으로 이해할 수 있다! 네트워크 연결이란 특징 덕분에 EC2 인스턴스와 분리되고 빠르게 다른 EC2에 연결할 수 있지만, 약간의 레이턴시가 발생한다. 그리고 저장소이기 때문에 사전에 EBS Volume의 성능을 정해야한다.

## EBS - EC2 종료시 삭제 기능

EC2 인스턴스를 생성할 때 콘솔에서 EBS Volume을 생성하면 `종료시 삭제` 옵션을 체크할 수 있다. 이를 통해 EC2의 변화가 있을 때 EBS 행동을 제어할 수 있다. 기본적으로 root EBS Volume은 삭제되도록 설정되어 있지만, 원할 경우 옵션을 비활성화 시킬 수 있다.

EC2 Instance Storage

## EBS 생성 방법

1. EC2 페이지에서 볼륨 생성 페이지 진입
2. 유형과 크기, 그리고 가용영역을 설정한다. 이때 가용영역은 EBS와 연결할 EC2와 같은 AZ에 있어야한다.
3. 생성한 EBS를 볼륨 연결을 통해 원하는 인스턴스와 연결. EBS는 특정 가용영역(AZ)에 바인딩되어 있기에 EC2와 다른 AZ에서 생성하면 연결할 수 없다.

## EBS 스냅샹

- EBS Volume의 백업 파일을 만들어 놓기에 추천된다.
- 다른 AZ나 Region의 EBS에 복사하기 위해 사용될 수 있다.

### 언제 사용해?

- EBS 스냅샷을 75% 더 싼 `EBS Snapshot Archive`에 옮겨서 저장할 수 있다. 단, 복원하는데 24시간에서 72시간 정도 걸린다.
- EBS 스냅샷을 바로 삭제하는 대신 `Recycle Bin`에 저장할 수 있다. 실수로 삭제해도 1년 안에 복구할 수 있다.
- 매우 빠르게 스냅샷을 복구하는 `Fast Snapshot Restore (FSR)`에 사용한다. 단, 비용이 많이 든다.

### 어떻게 사용하지?

1. EBS 볼룸 페이지에서 `스냅샷 생성`
2. EBS 탭에서 볼륨 대신 스냅샷으로 접속하면 아래와 같이 생성된다.
3. 해당 페이지에서 `스냅샷 복사`를 통해 Region으로 복사할 수 있다.
   - 재해방지를 위해 다른 Region에 저장하기 위해 사용됨.
   - 복사한 스냅샷으로 볼륨을 생성할 수 있다. 이때 원하는 AZ를 설정할 수 있다.
4. 휴지통 서비스 접속
   - 보존 규칙 생성
   - 리소스 유형과 보존 기간 설정
